<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnlogHabits - Analog</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Usando jsDelivr para maior confiabilidade -->
    <script defer src="https://cdn.jsdelivr.net/npm/@polkadot/api@10.13.1/dist/index.umd.min.js"></script>
    <script defer src="app.js"></script>
    <script defer src="lottery.js"></script>
</head>
<body>
    <div class="container">
        <!-- Navbar -->
        <nav id="navbar" class="navbar" style="display: none;">
            <div class="nav-container">
                <div class="nav-logo">AnlogHabits</div>
                <div class="nav-links">
                    <button class="nav-button active" data-page="missions">Miss√µes</button>
                    <button class="nav-button" data-page="wallet">Carteira</button>
                    <button class="nav-button" data-page="shop">Loja</button>
                    <button class="nav-button" data-page="research">Pesquisas</button>
                    <button class="nav-button" data-page="whitepaper">Whitepaper</button>
                    <button class="nav-button" data-page="presale">Pr√©-venda</button>
                    <div class="wallet-info">
                        <span id="wallet-address"></span>
                        <button id="disconnect-btn">Desconectar</button>
                    </div>
                </div>
                <button id="mobile-menu-btn" class="mobile-menu-btn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </nav>

        <!-- Home Page -->
        <div id="home-page" class="page active">
            <div class="hero-card">
                <img src="logo.png" alt="AnlogHabits Logo" class="hero-logo">
                <h1 class="hero-title">Bem-vindo ao AnlogHabits</h1>
                <p class="hero-subtitle">Transforme seus h√°bitos, ganhe recompensas!</p>
                <p class="hero-description">Complete miss√µes di√°rias, ganhe DET e participe do nosso ecossistema na blockchain Analog.</p>
                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-number">300%</div>
                        <div class="stat-label">Rendimento Anual</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">5</div>
                        <div class="stat-label">Miss√µes Di√°rias</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">90 dias</div>
                        <div class="stat-label">Bloqueio de Stake</div>
                    </div>
                </div>
                <div class="hero-buttons">
                    <button id="connect-wallet-btn" class="btn-primary">Conectar Carteira Talisman</button>
                    <button id="presale-btn" class="btn-secondary">Pr√©-venda</button>
                </div>
            </div>
        </div>

        <!-- Missions Page -->
        <div id="missions-page" class="page">
            <div class="page-header">
                <h1>Miss√µes Di√°rias</h1>
                <div class="missions-timer">
                    Pr√≥ximo reset em: <span id="mission-timer">00:00:00</span>
                </div>
            </div>
            <div id="missions-grid" class="missions-grid"></div>
            <h2>Miss√µes Fixas</h2>
            <div id="fixed-missions-grid" class="missions-grid"></div>
            <div class="daily-summary">
                <h3 class="summary-title">Resumo Di√°rio</h3>
                <div class="progress-bar">
                    <div id="daily-progress" class="progress-fill"></div>
                </div>
                <div class="summary-stats">
                    Miss√µes conclu√≠das: <span id="completed-missions">0</span>/5
                </div>
            </div>
        </div>

        <!-- Wallet Page -->
        <div id="wallet-page" class="page">
            <div class="page-header">
                <h1>Carteira</h1>
                <div id="wallet-address-full"></div>
            </div>
            <div class="wallet-cards">
                <div class="wallet-card">
                    <div class="card-header">
                        <h3>Saldo Total</h3>
                        <span class="det-icon">üí∞</span>
                    </div>
                    <div class="balance-amount">
                        <span id="total-balance">0</span> DET
                    </div>
                    <input type="number" id="withdraw-amount-input" placeholder="Quantia para sacar (m√≠n. 800 DET)" min="800" step="0.00001">
                    <button id="withdraw-btn" class="btn-primary full-width" disabled>Sacar</button>
                    <span class="withdraw-notice">M√≠nimo de 800 DET para saque</span>
                </div>
                <div class="wallet-card">
                    <div class="card-header">
                        <h3>Stake Obrigat√≥rio</h3>
                        <span class="stake-info">üîí</span>
                    </div>
                    <div class="balance-amount">
                        <span id="stake-balance">0</span> DET
                    </div>
                    <div class="stake-details">
                        <div class="stake-detail">
                            <span>Rendimento Di√°rio:</span>
                            <span id="daily-yield">+0.00000 DET</span>
                        </div>
                        <div class="stake-detail">
                            <span>Tempo restante:</span>
                            <span id="stake-time-left">Nenhum stake bloqueado</span>
                        </div>
                    </div>
                    <button id="withdraw-max-obligatory-btn" class="btn-primary full-width" disabled>Sacar o M√°ximo</button>
                </div>
                <div class="wallet-card">
                    <div class="card-header">
                        <h3>Stake Volunt√°rio</h3>
                        <span class="stake-info">üîì</span>
                    </div>
                    <div class="balance-amount">
                        <span id="voluntary-stake-balance">0</span> DET
                    </div>
                    <div class="stake-details">
                        <div class="stake-detail">
                            <span>Rendimento Di√°rio:</span>
                            <span id="daily-yield-voluntary">+0.00000 DET</span>
                        </div>
                    </div>
                    <div class="stake-input">
                        <input type="number" id="stake-amount-input" placeholder="Quantidade para stake (DET)" min="1" step="1">
                        <button id="stake-voluntary-btn" class="btn-primary full-width">Fazer Stake</button>
                        <input type="number" id="unstake-amount-input" placeholder="Quantidade para retirar (DET)" min="1" step="1">
                        <button id="unstake-voluntary-btn" class="btn-primary full-width">Retirar Stake</button>
                        <button id="withdraw-max-voluntary-btn" class="btn-primary full-width">Sacar o M√°ximo</button>
                    </div>
                </div>
                <div class="wallet-card">
                    <div class="card-header">
                        <h3>Saldo de Gastos</h3>
                        <span class="spending-info">üõí</span>
                    </div>
                    <div class="balance-amount">
                        <span id="spending-balance">0</span> DET
                    </div>
                    <div class="lottery-winnings">
                        <span>Ganhos de Sorteios:</span>
                        <span id="lottery-winnings">0</span> DET
                    </div>
                    <div class="transfer-input">
                        <input type="number" id="transfer-amount-input" placeholder="Quantidade para transferir (DET)" min="0.00001" step="0.00001">
                        <button id="transfer-lottery-btn" class="btn-primary full-width" disabled>Transferir Ganhos para Saldo Total</button>
                    </div>
                </div>
            </div>
            <div class="transaction-history">
                <h3>Hist√≥rico de Transa√ß√µes</h3>
                <div id="transaction-history" class="history-list"></div>
            </div>
        </div>

        <!-- Shop Page -->
        <div id="shop-page" class="page">
            <div class="container">
                <div class="page-header">
                    <h1>Sorteios de Ba√∫s</h1>
                    <div class="shop-balance">Saldo: <span id="shop-balance">0 DET</span></div>
                </div>
                <div class="lottery-grid">
                    <div class="lottery-item" data-lottery-id="1">
                        <div class="lottery-image">üéÅ</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ Inicial</h4>
                            <p>Custo: 1 DET | Pr√™mio: 1 a 3 DET</p>
                        </div>
                        <div class="lottery-price">1 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(1)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="2">
                        <div class="lottery-image">üéÅ</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ Simples</h4>
                            <p>Custo: 5 DET | Pr√™mio: 4 a 12 DET</p>
                        </div>
                        <div class="lottery-price">5 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(2)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="3">
                        <div class="lottery-image">ü•â</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ de Bronze</h4>
                            <p>Custo: 10 DET | Pr√™mio: 8 a 20 DET</p>
                        </div>
                        <div class="lottery-price">10 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(3)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="4">
                        <div class="lottery-image">ü•à</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ de Prata</h4>
                            <p>Custo: 20 DET | Pr√™mio: 16 a 40 DET</p>
                        </div>
                        <div class="lottery-price">20 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(4)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="5">
                        <div class="lottery-image">ü•á</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ de Ouro</h4>
                            <p>Custo: 40 DET | Pr√™mio: 32 a 70 DET</p>
                        </div>
                        <div class="lottery-price">40 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(5)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="6">
                        <div class="lottery-image">üíé</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ de Platina</h4>
                            <p>Custo: 60 DET | Pr√™mio: 50 a 100 DET</p>
                        </div>
                        <div class="lottery-price">60 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(6)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="7">
                        <div class="lottery-image">‚öîÔ∏è</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ √âpico</h4>
                            <p>Custo: 80 DET | Pr√™mio: 65 a 130 DET</p>
                        </div>
                        <div class="lottery-price">80 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(7)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="8">
                        <div class="lottery-image">üßô</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ M√≠tico</h4>
                            <p>Custo: 120 DET | Pr√™mio: 100 a 200 DET</p>
                        </div>
                        <div class="lottery-price">120 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(8)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="9">
                        <div class="lottery-info">
                            <h4>Ba√∫ Supremo</h4>
                            <p>Custo: 250 DET | Pr√™mio: 200 a 450 DET</p>
                        </div>
                        <div class="lottery-price">250 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(9)">Abrir Ba√∫</button>
                    </div>
                    <div class="lottery-item" data-lottery-id="10">
                        <div class="lottery-image">üíé</div>
                        <div class="lottery-info">
                            <h4>Ba√∫ Lend√°rio</h4>
                            <p>Custo: 500 DET | Pr√™mio: 400 a 900 DET</p>
                        </div>
                        <div class="lottery-price">500 DET</div>
                        <button class="lottery-btn" onclick="window.lottery.enterLottery(10)">Abrir Ba√∫</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pesquisas Page -->
        <div id="research-page" class="page">
            <div class="page-header">
                <h1>Pesquisas - AnlogHabits</h1>
                <div class="missions-timer">
                    Saldo ANLOG: <span id="anlog-balance">0</span> | N√≠vel atual: <span id="research-timer">N√≠vel 1</span>
                </div>
            </div>
            <div id="research-grid" class="missions-grid">
                <div class="research-banner" data-banner="tenis">
                    <div class="banner-header">
                        <span class="banner-icon">üëü</span>
                        <span class="banner-reward">+<span id="tenis-reward">0.5</span> DET (N√≠vel <span id="tenis-level">1</span>)</span>
                    </div>
                    <h3 class="banner-title">T√™nis (Caminhada/Corrida)</h3>
                    <p class="banner-description">Aumente recompensas para miss√µes de movimento.</p>
                    <div class="progress-bar">
                        <div id="tenis-progress" class="progress-fill" style="width: 1%"></div>
                    </div>
                    <p class="banner-level">N√≠vel <span id="tenis-level-display">1</span>/100</p>
                    <p class="banner-cost">Custo pr√≥ximo n√≠vel: <span id="tenis-cost">300</span> ANLOG</p>
                    <button class="btn-primary" id="upgrade-tenis" data-banner="tenis">Subir N√≠vel</button>
                    <button class="btn-secondary" id="test-tenis" data-banner="tenis">Testar Miss√£o</button>
                </div>
                <div class="research-banner" data-banner="tapete">
                    <div class="banner-header">
                        <span class="banner-icon">üßò</span>
                        <span class="banner-reward">+<span id="tapete-reward">0.5</span> DET (N√≠vel <span id="tapete-level">1</span>)</span>
                    </div>
                    <h3 class="banner-title">Tapete (Medita√ß√£o/Relaxamento)</h3>
                    <p class="banner-description">Aumente recompensas para miss√µes de relaxamento.</p>
                    <div class="progress-bar">
                        <div id="tapete-progress" class="progress-fill" style="width: 1%"></div>
                    </div>
                    <p class="banner-level">N√≠vel <span id="tapete-level-display">1</span>/100</p>
                    <p class="banner-cost">Custo pr√≥ximo n√≠vel: <span id="tapete-cost">300</span> ANLOG</p>
                    <button class="btn-primary" id="upgrade-tapete" data-banner="tapete">Subir N√≠vel</button>
                    <button class="btn-secondary" id="test-tapete" data-banner="tapete">Testar Miss√£o</button>
                </div>
            </div>
            <div class="research-summary">
                <h3 class="summary-title">Como Funciona</h3>
                <p>Pague com ANLOG para subir n√≠veis e ganhar mais DET em miss√µes relacionadas (ex.: caminhada usa T√™nis, medita√ß√£o usa Tapete). A curva de recompensas aumenta significativamente nos n√≠veis 70-100.</p>
                <p>Recompensas por n√≠vel: <br>1-30: +0.5 a +1.5 DET | 31-60: +1.6 a +3 DET | 61-80: +3.1 a +5 DET | 81-100: +5.1 a +10 DET.</p>
            </div>
        </div>

        <!-- Whitepaper Page -->
        <div id="whitepaper-page" class="page">
            <div class="container">
                <div class="page-header">
                    <h1>Whitepaper</h1>
                    <div class="document-meta">Vers√£o 2.1 | Abril 2025</div>
                </div>
                <div class="whitepaper-content">
                    <div class="wp-section">
                        <h2>1. Introdu√ß√£o</h2>
                        <p>Anlog Habits √© um aplicativo inovador que recompensa os usu√°rios por adotarem h√°bitos saud√°veis e produtivos. Complete tarefas simples como caminhar, beber √°gua ou meditar, envie uma foto como prova e ganhe tokens DET como recompensa.</p>
                        <p>A ideia √© transformar pequenas a√ß√µes positivas em ganhos reais usando o poder da blockchain Analog, intelig√™ncia artificial e gamifica√ß√£o.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Presale Page -->
        <div id="presale-page" class="page">
            <div class="container">
                <div class="page-header">
                    <h1>Pr√©-venda do DET</h1>
                    <div class="status-badge">Aberta em Q2 2025</div>
                </div>
                <div class="presale-hero">
                    <div class="presale-info">
                        <h2>Participe da Pr√©-venda do DET</h2>
                        <p>Adquira tokens DET por $0.02 cada. Supply da pr√©-venda: 10.000.000 DET (10% do total). M√≠nimo: 500 DET ($10). M√°ximo: 100.000 DET ($2.000).</p>
                        <p>Objetivo: Financiar o desenvolvimento e expans√£o do Anlog Habits na Analog.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Photo Upload Modal -->
        <div id="photo-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-mission-title">Miss√£o</h3>
                    <button id="close-modal" class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Fa√ßa upload de uma foto para comprovar a conclus√£o da miss√£o.</p>
                    <div class="photo-upload-area">
                        <label for="photo-input" class="photo-upload-label">
                            <div class="upload-icon">üì∑</div>
                            Escolher Foto
                        </label>
                        <input type="file" id="photo-input" accept="image/*">
                        <div id="photo-preview"></div>
                    </div>
                    <button id="submit-mission-btn" class="btn-primary full-width" disabled>Enviar Miss√£o</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-spinner"></div>
            <p>Carregando...</p>
        </div>

        <!-- Toast Notifications -->
        <div id="toast-container" class="toast-container"></div>

        <!-- Lottery Win Modal -->
        <div id="lottery-win-modal" class="modal">
            <div class="modal-content lottery-win-modal">
                <div class="modal-header">
                    <h3>Parab√©ns!</h3>
                    <button id="close-lottery-modal" class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="lottery-win-content">
                        <div class="lottery-win-emoji">üéâ</div>
                        <p id="lottery-win-message">Voc√™ abriu o Ba√∫ e ganhou X DET!</p>
                        <div class="particle-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>